"use strict";function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,a){for(var e=0;e<a.length;e++){var s=a[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(a,e,s){return e&&t(a.prototype,e),s&&t(a,s),a}}(),data={algeria:{name:"Algeria",code:"dz",capital:"Algiers",population:"40,400,000",cards:[{number:"1",city:"Annaba",coord:{lat:36.9264582,lng:7.752535200000011},images:{front:"./assets/cards/front/front003.jpg",back:"./assets/cards/back/back003.jpg"}}]},australia:{name:"Australia",code:"au",capital:"Canberra",population:"24,637,400",cards:[{number:"1",city:"Melbourne",coord:{lat:-37.8136276,lng:144.96305759999996},images:{front:"./assets/cards/front/front018.jpg",back:"./assets/cards/back/back018.jpg"}}]},canada:{name:"Canada",code:"ca",capital:"Ottawa",population:"934,243",cards:[{number:"1",city:"Grand Falls, New Brunswick",coord:{lat:47.04799346,lng:-67.73990149999997},images:{front:"./assets/cards/front/front001.jpg",back:"./assets/cards/back/back001.jpg"}}]},china:{name:"China",code:"cn",capital:"Beijing",population:"1,373,541,278",cards:[{number:"1",city:"Guangzhou",coord:{lat:23.12911,lng:113.26438499999995},images:{front:"./assets/cards/front/front014.jpg",back:"./assets/cards/back/back014.jpg"}}]},croatia:{name:"Croatia",code:"hr",capital:"Zagreb",population:"4,190,700",cards:[{number:"1",city:"Rovinj",coord:{lat:45.0811661,lng:13.638706700000057},images:{front:"./assets/cards/front/front004.jpg",back:"./assets/cards/back/back004.jpg"}},{number:"2",city:"Zagreb",coord:{lat:45.8150108,lng:15.981918899999982},images:{front:"./assets/cards/front/front005.jpg",back:"./assets/cards/back/back005.jpg"}}]},england:{name:"England",code:"gb-eng",capital:"London",population:"54,786,300",cards:[{number:"1",city:"Skegness",coord:{lat:53.146403,lng:.3378810000000385},images:{front:"./assets/cards/front/front015.jpg",back:"./assets/cards/back/back015.jpg"}}]},estonia:{name:"Estonia",code:"ee",capital:"Tallinn",population:"1,315,635",cards:[{number:"1",city:"Rapla",coord:{lat:59.0057346,lng:24.79424199999994},images:{front:"./assets/cards/front/front019.jpg",back:"./assets/cards/back/back019.jpg"}}]},finland:{name:"Finland",code:"fi",capital:"Helsinki",population:"5,506,312",cards:[{number:"1",city:"Kuopio",coord:{lat:62.89796999999999,lng:27.67817249999996},images:{front:"./assets/cards/front/front002.jpg",back:"./assets/cards/back/back002.jpg"}},{number:"2",city:"Helsinki",coord:{lat:60.16985569999999,lng:24.93837910000002},images:{front:"./assets/cards/front/front008.jpg",back:"./assets/cards/back/back008.jpg"}}]},germany:{name:"Germany",code:"de",capital:"Berlin",population:"82,175,700",cards:[{number:"1",city:"Berlin",coord:{lat:52.52000659999999,lng:13.404953999999975},images:{front:"./assets/cards/front/front016.jpg",back:"./assets/cards/back/back016.jpg"}}]},greece:{name:"Greece",code:"gr",capital:"Athens",population:"10,955,000",cards:[{number:"1",city:"Polygyros",coord:{lat:40.3816285,lng:23.44259809999994},images:{front:"./assets/cards/front/front017.jpg",back:"./assets/cards/back/back017.jpg"}}]},malaysia:{name:"Malaysia",code:"my",capital:"Kuala Lumpur",population:"31,636,000",cards:[{number:"1",city:"Kota Bharu",coord:{lat:6.1167855,lng:102.27768379999998},images:{front:"./assets/cards/front/front013.jpg",back:"./assets/cards/back/back013.jpg"}}]},netherlands:{name:"Netherlands",code:"nl",capital:"Amsterdam",population:"17,116,281",cards:[{number:"1",city:"Goes",coord:{lat:51.5046455,lng:3.8911304000000655},images:{front:"./assets/cards/front/front007.jpg",back:"./assets/cards/back/back007.jpg"}},{number:"2",city:"Arnhem",coord:{lat:51.9851034,lng:5.898729600000024},images:{front:"./assets/cards/front/front012.jpg",back:"./assets/cards/back/back012.jpg"}}]},philippines:{name:"Philippines",code:"ph",capital:"Manila",population:"100,981,437",cards:[{number:"1",city:"Valenzuela",coord:{lat:14.7010556,lng:120.98302250000006},images:{front:"./assets/cards/front/front009.jpg",back:"./assets/cards/back/back009.jpg"}}]},russia:{name:"Russia",code:"ru",capital:"Moscow",population:"144,463,451",cards:[{number:"1",city:"Oryol",coord:{lat:52.9668468,lng:36.06248979999998},images:{front:"./assets/cards/front/front011.jpg",back:"./assets/cards/back/back011.jpg"}},{number:"2",city:"Yekaterinburg",coord:{lat:56.83892609999999,lng:60.60570250000001},images:{front:"./assets/cards/front/front020.jpg",back:"./assets/cards/back/back020.jpg"}}]},taiwan:{name:"Taiwan",code:"tw",capital:"Taipei",population:"23,550,077",cards:[{number:"1",city:"Keelung",coord:{lat:25.1276033,lng:121.73918329999992},images:{front:"./assets/cards/front/front006.jpg",back:"./assets/cards/back/back006.jpg"}}]},turkey:{name:"Turkey",code:"tr",capital:"Ankara",population:"79,814,871",cards:[{number:"1",city:"Istanbul",coord:{lat:41.0082376,lng:28.97835889999999},images:{front:"./assets/cards/front/front010.jpg",back:"./assets/cards/back/back010.jpg"}}]}},App={data:data,keys:Object.keys(data),mainContent:"",countryPages:{},currentPage:"home",cacheElements:function(){this.content=document.getElementById("content"),this.home=document.getElementById("home"),this.about=document.getElementById("about"),this.map=document.getElementById("map"),this.trade=document.getElementById("trade")},cacheTemplates:function(){this.countryTemplate=document.getElementById("country-template").innerHTML.trim(),this.countryPageTemplate=document.getElementById("country-page-template").innerHTML.trim(),this.postcardTemplate=document.getElementById("postcard-template").innerHTML.trim(),this.aboutPageTemplate=document.getElementById("about-page").innerHTML.trim(),this.tradePageTemplate=document.getElementById("trade-page").innerHTML.trim()},buildHomePage:function(){var t=this;this.keys.forEach(function(a){t.mainContent+=new Country(t.data[a]).template})},renderCountries:function(){this.content.innerHTML=this.mainContent},getClickedCountry:function(t){return t&&!t.matches(".country")?this.getClickedCountry(t.parentElement):t},handleClickedCountry:function(t){this.currentPage=t.dataset.country,this.buildCountryPage(),this.renderCountryPage(),this.removeActiveClass()},buildCountryPage:function(){this.countryPages[this.currentPage]||(this.countryPages[this.currentPage]=new CountryPage(this.data[this.currentPage]).template)},renderCountryPage:function(){this.content.innerHTML=this.countryPages[this.currentPage]},goToHome:function(t){"home"!==this.currentPage&&(this.renderCountries(),this.removeActiveClass(),this.addActiveClass(t),this.currentPage="home")},removeActiveClass:function(){this.home.classList.remove("active"),this.about.classList.remove("active"),this.trade.classList.remove("active")},addActiveClass:function(t){t.classList.add("active")},getCoordinates:function(){var t=[],a=[],e=Object.keys(this.data),s=void 0;for(s=0;s<e.length;s+=1)this.data[e[s]].cards.forEach(function(e){-1===t.indexOf(e.city)&&(a.push(e.coord),t.push(e.city))});return a},buildMap:function(){var t=this,a=this.getCoordinates(),e=new google.maps.LatLngBounds;this.map=new google.maps.Map(document.getElementById("map")),a.forEach(function(a){var s=new google.maps.Marker({position:a,map:t.map});e.extend(s.getPosition())}),this.map.fitBounds(e)},goToAbout:function(t){"about"!==this.currentPage&&(this.content.innerHTML=this.aboutPageTemplate,this.removeActiveClass(),this.addActiveClass(t),this.currentPage="about")},goToTrade:function(t){this.content.innerHTML=this.tradePageTemplate,this.removeActiveClass(),this.addActiveClass(t),this.currentPage="trade"},bindEvents:function(){var t=this;document.addEventListener("click",function(a){var e=a.target,s=t.getClickedCountry(e);s?t.handleClickedCountry(s):"home"===e.id||"title"===e.id?(a.preventDefault(),t.goToHome(t.home)):"about"===e.id?(a.preventDefault(),t.goToAbout(t.about),t.buildMap()):"trade"===e.id&&(a.preventDefault(),t.goToTrade(e))})},init:function(){this.cacheElements(),this.cacheTemplates(),this.bindEvents(),this.buildHomePage(),this.renderCountries()}},Country=function(){function t(a){_classCallCheck(this,t),this.name=a.name,this.code=a.code,this.cards=a.cards,this.template=App.countryTemplate,this.buildCountryHTML()}return _createClass(t,[{key:"buildCountryHTML",value:function(){this.template=this.template.replace(/{{COUNTRY-DATA}}/g,this.name.toLowerCase()),this.template=this.template.replace(/{{COUNTRY}}/g,this.name),this.template=this.template.replace(/{{CODE}}/g,this.code)}}]),t}(),CountryPage=function(){function t(a){_classCallCheck(this,t),this.name=a.name,this.capital=a.capital,this.population=a.population,this.cards=a.cards,this.template=App.countryPageTemplate,this.buildCountryPageHTML()}return _createClass(t,[{key:"buildCountryPageHTML",value:function(){this.template=this.template.replace(/{{COUNTRY}}/g,this.name),this.template=this.template.replace(/{{CAPITAL}}/g,this.capital),this.template=this.template.replace(/{{POPULATION}}/g,this.population),this.template=this.template.replace(/{{POSTCARDS}}/g,this.buildPostcards())}},{key:"buildPostcards",value:function(){var t="";return this.cards.forEach(function(a){t+=new Postcard(a).template}),t}}]),t}(),Postcard=function(){function t(a){_classCallCheck(this,t),this.number=a.number,this.city=a.city,this.front=a.images.front,this.back=a.images.back,this.template=App.postcardTemplate,this.buildPostcardHTML()}return _createClass(t,[{key:"buildPostcardHTML",value:function(){this.template=this.template.replace(/{{CARD-NUMBER}}/g,this.number),this.template=this.template.replace(/{{CITY}}/g,this.city),this.template=this.template.replace(/{{FRONT}}/g,this.front),this.template=this.template.replace(/{{BACK}}/g,this.back)}}]),t}();App.init();